### 1、描述因特网的两种方法

端系统和分组交换机连接到一起的物理媒体

为应用程序提供服务的基础设施



### 2、协议

定义了在多个通信实体之间交换的报文格式和次序，以及在报文传输和接收等方面所采取的动作



### 3、计算机网络

由通信子网和资源子网组成



### 4、接入网的几种形式

接入网：将端系统连接到其边缘路由器的物理链路

住宅接入

公司

无线接入



### 5、物理媒体

引导型：光纤、双绞线、同轴

非引导型：无线、卫星（同步卫星：36000KM）



### 6、网络核心

电路交换：资源预留

分组交换：其端到端时延是变动和不可预测的



### 7、分组交换

分组交换采用存储转发传输，交换报文，源主机将长报文划分为较小的分组。



### 8、分组交换的节点时延

总时延 = 发送时延+传播时延+处理时延+排队时延

发送时延=数据长度/发送速率

传播时延=距离/传播速率

比特宽度=传播速率 / 带宽 



### 9、流量强度

**I=La/R**

R为传输速率(bps/s)，a表示分组到达队列的平均速率（pkt/s)，L为分组的长度



### 10、网络的体系结构

Client/Server（C/S）: 客户机请示，服务器响应，客户机之间相互不直接通信，服务有固定IP地址
P2P：对服务器依赖小或没有，对等方直接通信
Client/Server+P2P：由客户机/服务器和P2P元素结合而成



### 11、可供应用程序使用的运输服务

TCP服务：面向连接、可靠数据传输、拥塞控制

UDP服务：提供最小服务、无连接的，无握手，提供不可靠的数据传输、无拥塞控制机制



### 12、HTTP连接方式

非持久连接：

+ 每个TCP连接只传输一个请求报文和一个响应报文.
+ 每个请求/响应对是单独的TCP连接
  

持久连接：

+ 相同的客户机与服务器之间的每个请求/响应对是相同的TCP连接发送。
+ HTTP默认采用流水线式的持久连接



### 13、Cookie

请求报文首部行
响应报文首部行
Cookie文件
后台数据库，创建ID



### 14、FTP

使用两个并行的TCP连接来传输文件

+ 控制连接
+ 数据连接

带外传输机制：

+ 当用户主机与远程主机开始一个FTP会话前，FTP的客户机首先在21号端口上发起一个用于控制的与服务器的TCP连接。

+ 当FTF的服务器端从该连接上收到一个文件传输的命令后，在20号端口发起一个到客户机的数据连接。FTP在该数据连接上传送一个文件后关闭该连接。

+ 控制连接贯穿了整个用户会话期间，但是针对会话中的每一次文件传输都需要建立一个新的数据连接。



### 15、电子邮件

用户代理
邮件服务器
简单邮件传输协议SMTP



### 16、邮件访问协议

POP3

IMAP	

HTTP



### 17、DNS

描述

+ 由分层的DNS服务器实现的分布式数据库
+ 允许主机查询分布式数据库的应用层协议

功能

+ 将域名解析为IP地址
+ 主机别名：一个主机，可以有多个别名。
+ 邮件服务器别名
+ 负载分配：冗余服务器之间进行负载分配，应答时IP集合旋转

运行方式

+ UDP

类型

+ 根DNS服务器
+ 顶级域DNS服务器（TLD）:  负责顶级域名（com、org、edu）和国家顶级域名（cn）
+ 权威DNS服务器：公共可访问的DNS记录，将主机名映射为IP地址
+ 本地DNS服务器：属于DNS的层次结构

查询方式

+ 从本地主机到本DNS服务器是递归查询：递归查询就是：如果主机所询问的本地域名服务器不知道被查询的域名的IP地址，那么本地域名服务器就以DNS客户的身份，向其它根域名服务器继续发出查询请求报文
+ 其余的是迭代查询： 顶级域名服务器在收到本地域名服务器的查询请求后，要么给出所要查询的IP地址，要么告诉本地服务器下一步应当向哪一个权限域名服务器进行查询。



### 18、TCP

SMTP、 TELNET、 FTP、 HTTP、VoIP



### 19、UDP

DNS、SNMP、RIP VoIP



### 20、多路复用

从源主机的不同socket中收集数据块，并为每个数据块封装上首部信息从而生成报文段，将报文段传递到网络层的工作。



### 21、多路分解

将运输层报文段中的数据交付到正确的socket的工作。



### 22、可靠数据传输的原理

要求

+ 无比特错误
+ 无丢包

Rdt1.0

+ 无比特错误、无丢包

Rdt2.0

+ 具有比特差错、无丢包
+ 解决方法： ARQ协议
  + 差错检测（接收方）：检验和
  + 反馈
    接收方—>确认：肯定ACK 与否定NAK，
    发送方—>决定下一步动作
  + 重传（发送方）：发送方重发。

Rdt2.1

+ ACK与NAK受损
+ 解决方法：增加足够的比特，发送方可检错与纠错

Rdt2.2

+ 无NAK的可靠数据传输协议
+ 解决方法：接收方必须包括由一个ACK报文确认的分组序号

Rdt3.0

+ 具有比特差错，丢包
+ 解决方法：定时器



### 23、连续 ARQ 协议

+ 序号增加、累积确认
+ 发送缓存用来暂时存放：
  + 发送应用程序传送给发送方 TCP 准备发送的数据；
  + TCP 已发送出但尚未收到确认的数据。
+ 接收缓存用来暂时存放：
  + 按序到达的、但尚未被接收应用程序读取的数据；
  + 不按序到达的数据。



### 24、差错恢复的两种基本方法

GBN：回退N步

+ 允许发送多个分组而不需要等待确认
+ 累积确认：收到一个确认帧，之前的也确认
+ 按序交付，失序则丢弃
+ 回退机制：重传已发送过的 N 个分组

SR：选择重传

+ 窗口长度小于等于序号空间一半
+ 逐一确认：每个分组需要一个确认帧
+ 只重发未被 确认的分组
+ 失序缓存，按序交付
+ <img src="https://ningct.oss-cn-hangzhou.aliyuncs.com/image-20230226132931403.png" alt="image-20230226132931403" style="zoom:67%;" />



### 25、流量控制

发送端和接收端之间的点对点通信量的控制、



### 26、拥塞控制

对网络中某资源的需求超过了该资源所能提供的可用部分

全局性的过程，涉及到所有的主机、所有的路由器，以及与降低网络传输性能有关的所有因素



### 27、TCP的拥塞控制

+ AIMD（加性增、乘性减）：出现丢包时， CongWin降低一半。
+ 慢启动：初始值为1，之后，每收到一个确认报文， CongWin增加一倍。
+ 对超时事件作出反应：通过维持一个阀值来管理



### 28、传输层的拥塞控制方法

+ 缓冲区预分配法
+ 分组丢弃法
+ 许可证法



### 29、路由器

功能

+ 转发：一个分组从一条入链路到一台路由器中的出链路的传送
+ 选路：网络层决定分组从源到目的地节点所采用的路径



组成部分

+ 输入端口
+ 交换结构
+ 输出端口
+ 选路处理器



最长前缀匹配规则

+ 将数据包的目的IP地址与自己本地路由表中的所有路由表进行逐位（Bit-By-Bit）对比，直到找到匹配度最长的条目



选路算法

+ 链路状态算法：完整的、全局性的计算从源到目的之间的最低费用路径
  + Dx(Y，Z) = c(X，Z) +minw {Dz(Y，w)}：：节点X经过Z到达Y的距离= X到邻居Z的距离+ Z到Y的最短距离（经过Z的相邻某一个节点w）
  + <img src="https://ningct.oss-cn-hangzhou.aliyuncs.com/image-20230226134618462.png" alt="image-20230226134618462" style="zoom:67%;" />
+ 距离向量算法：以迭代的、分布式的方式计算出最低费用路径
  + <img src="https://ningct.oss-cn-hangzhou.aliyuncs.com/image-20230226134958198.png" alt="image-20230226134958198" style="zoom:50%;" />



### 30、网络层提供的两种服务

+ 虚电路服务
  + 可靠通信应当由网络来保证
  + 终端简单、网络复杂
  + 属于同一条虚电路的分组均按照同一路由进行转发
  + 按发送顺序到达终点
  + 可以由网络负责，也可以由用户主机负责端到端的差错处理和流量控制
+ 数据报服务
  + 可靠通信应当由用户主机来保证
  + 终端复杂、网络简单
  + 每个分组独立选择路由进行转发
  + 到达终点时不一定按发送顺序
  + 由用户主机负责端到端的差错处理和流量控制



### 31、网络层协议

+ ICMP：网际控制报文协议，提供差错报告报文和 ICMP 询问报文，还有源抑制报文

+ IP：提供尽力而为的服务

+ CIDR：无类别域间选路，对子网寻址，IP地址划分为两部分
+ DHCP：动态主机配置协议，自动获得IP地址
+ IPv6：128位，40字节的固定首部，只能在源与目的上进行分片与重组装



### 32、IPv4数据报格式

+ 首部长度： 一般IP数据报不包含可选项，长度为20字节。
+ 首部检验和：只校验首部和，每两个字节当作一个数，用反码运算求和
+ TTL：(Time to Live) 到0时终止



### 33、路由协议

+ 内部网关协议IGP：AS内部使用

  + RIP：Routing Information Protocol,选路信息协议

    + 使用跳数（hop）做为其费用测度
    + 最大费用被限制为15
    + 较低层ISP和企业网

  + OSPF：Open Shortest Path First,开放路径最短优先

    + 使用洪泛链路状态信息的链路状态协议
    + OSPF优点：
      安全：交换都是经过鉴别的
      多条费用相同的路径：费用相同时，可以使用多条
      对单播选路与多播选路的综合支持
      支持在单个选路域内的层次结构

    

+ 外部网关协议EGP：AS外部使用

  + BGP协议



### 34、广播和多播选路

+ 广播选路：从一个源节点到网络中的所有其它节点交付分组
+ 广播选路算法：
  + 无控制洪泛：要求源节点向它的所有邻居发送该分组拷贝，产生广播风暴。
  + 受控洪泛：
    序号控制洪泛：加入控制序号，重复时，直接丢弃。否则，保存并广播
    反向路径转发RPF：是否为最短路径上转发的分组。
  + 生成广播树：可以完全避免冗余广播。
+ 多播选路：使单个源节点能够向其它网络节点的一个子集发送分组的拷贝
  + 距离向量多播选路协议：DVMRP



### 35、链路层的两种链路信道

广播信道

点对点信道



### 36、链路层协议

以太网、802.11，令牌环、PPP



### 37、链路层提供的服务

成帧、链路接入（MAC）、可靠交付、流量控制

差错检测、差错纠正、半双工和全双工



### 38、CRC（循环冗余检测）

+ G（x）
+ 模2操作，加法不进位，减法不借位（等同于XOR）
+ 余数R=  D*2r / G 
+ 发送方：D*2r+R 
+ 接收方： D*2r+R /G ，结果R为0正确，否则，错误



### 39、多路访问协议

+ 信道划分协议
  + TDM，FDM，CDMA
+ 随机接入协议
  + 时隙ALOHA、ALOHA、CSMA
+ 轮流协议
  + 轮询协议、令牌（token)



### 40、ARP

+ IP—>MAC
+ 只为同一个子网上的节点解析。
+ 查询ARP报文是在广播帧中发送的，而响应ARP报方在标准帧中发送的



### 41、以太网协议

+ 设备： Hub, Switch

+ 提供服务：

  向网络提供不可行的无连接服务
  CRC：错误时直接丢弃，无其它动作

+ 多路访问协议：CSMA/CD

  + 无时隙：可在任何时刻开始传输
  + 载波侦听：若检测到其它适配器正传输数据，则不传输数据
  + 碰撞检测：传输中的适配器检测另一适配器正在传输，则中止传输。
  + 工作方式
    + 将网络层得到的数据封装成以太网帧，并把它放到适配器缓存区中
    + 侦听：
      信道空闲（96比特时间内，侦听不到信号能量）则发送
      信道忙，则继续侦听，无信号能量，再延时96比特时间。
    + 监听：在传输过程中，监听是否有来自其它适配器的信号能量
      无：则传输完成该帧
      有：停止传输该帧，传输一个48比特的阻塞信号，进入指数后退阶段。
      + 指数后退算法：K·512比特时间
      + K={0, 1, 2,… 2m-1 }
      + m= min ( n,10 ）
      + 碰撞次数：n
    + 阻塞信号：确保所有其它传输中的适配器能检测到此次碰撞。



### 42、交换机

即插即用设备
过滤：决定一个帧是转发到某口还是丢弃。
转发：借助于交换机表把一个帧导向某一接口。

交换机与路由器的比较

+ 都是存储转发分组。
+ 交换机使用MAC地址，路由器使用网络地址
+ 交换机可过滤和控制转发速率
+ 交换机对广播风暴无任何保护措施



### 43、无线链路和网络特征

信号衰减，来自其它源的干扰，多径传播

采用措施：CRC错误检测码、链路层ARQ协议重传错误帧



### 44、WiFi:802.11

SSID：（Service Set Identifier,服务标识符集）

AP：（Access Point, 接入点），802.11标准要求每个AP周期性地发送信标帧（包含该AP的SSID和MAC地址）

CSMA/CA：

+ 不使用碰撞检测
+ 链路层确认
  + DIFS：分布式间隔：发送站点检测到信道空闲后，延时DIFS后发送。 
  + SIFS：短帧间间隔：目的站点收到CRC确认正确的帧后，等待SIFS的一小段时间后，发回一个确认帧。

+ 隐藏终端的处理：RTS：请示发送、CTS：允许发送

移动管理

+ 转交地址：移动节点移动到外部网络中被分配的IP地址
+ 归属网络：移动节点的固定居所
+  归属代理：在固定居所中代表移动节点执行移动管理功能的实体
+ 外部网络：移动节点当前所在的网络
+ 外部代理：帮助移动节点在外部网络完成移动管理功能的实体



第三代无线通信系统

+ UMTS、WCDMA、UTRAN、GSM



### 45、安全通信的特性

+ 机密性：信息仅有发送方和接收方能够理解。
+ 完整性：内容未被恶意篡改
+ 鉴别：通信双方身份的真实性。
+ 可用性：对合法用户要可持续使用
+ 合法性：对非授权人或非授权方式不可使用



### 46、对称密钥

加密/解密密钥相同

DES协议，AES协议



### 47、非对称密钥系统

一对密钥（PK、SK），公钥解密，私钥解密

RSA协议、DHE、ECDHE





密钥系统流程图：

会话密钥通过非对称加密得到

发送

+ 将报文进行散列得到摘要
+ 非对称加密摘要+对称加密报文
+ 会话密钥加密

接收

+ 会话密钥解密
+ 非对称密钥解密摘要+对称解密报文
+ 将报文进行散列得到摘要，对比摘要

<img src="https://ningct.oss-cn-hangzhou.aliyuncs.com/image-20230226143458526.png" alt="image-20230226143458526" style="zoom:50%;" />



### 48、鉴别协议ap

ap1.0： 标识

ap2.0 ：IP+标识

ap3.0 ：口令+标识

ap3.1 ：口令加密+标识

ap4.0 ：对称密钥+不重数R

ap5.0 ：非对称密钥+不重数



### 49、安全协议

SSL

IPsec



### 50、无线LAN安全

IEEE802.11的WEP协议



### 51、运行安全性

防火墙FW

+ 硬件和软件的结合体
+ 所有流量都要经过FW

入侵检测系统：IDS

+ 基于特征的系统，
+ 基于异常的系统