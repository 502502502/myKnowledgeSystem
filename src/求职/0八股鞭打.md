### 1、B树和B+树

>  介绍一下B+树/为什么要用B+树做索引/B+树比B树有哪些优点

B+树是一种平衡树，节点的子树高度差不超过一个常数。这保证了树的高度相对较小，从而减少了查询时需要的磁盘访问次数。

B+树的叶子节点通过指针串联成有序链表。可以通过对链表的顺序访问来获取范围查询结果。

B+树的内部节点只保存索引信息，不存储实际数据，减少磁盘IO。一个结点可以保存更多的索引信息，查询的范围会缩小，降低了数的高度，因为你如果每个结点存储的索引少，那就需要更多的高度去减少查询的范围，最终定位到叶子结点。



> 介绍一下平衡树

平衡树会保证子树的高度差在一个常数的范围内，保证了树的高度不会太大，退化成链表

平衡树每一个结点都会存储一个平衡因子，来判断当前结点是否平衡，从而是否需要进行自平衡操作。

自平衡操作是平衡树为了保证子树高度平衡采取的一些措施，去调整树的结构，比如旋转，变色。

常见的平衡树有二叉平衡树，B树和B+树，红黑树等。



> 二叉平衡树是怎么保证高度平衡的

**插入**：

+ 先按照二叉搜索树的插入方式递归的进行插入
+ 然后检测高度是否平衡，如果高度不再平衡，**通过旋转的方式调整**
  + 更新结点的高度

**删除**：

+ 先按照二叉搜索树的方式递归的进行删除
+ 删除后检测左右子树高度以及子树的左右子树高度确认不平衡的原因
+ 根据原因进行不同的旋转操作即可

**左旋**：

+ 旋转点下沉为左子结点，它的右子节点上升父节点，再交换彼此的子树。逆时针旋转

**右旋**：

+ 旋转点下沉为右子节点，它的左子节点上升为父节点，再交换彼此的子树。顺时针旋转

**旋转场景**：

+ LL：导致不平衡的结点在左结点的左结点后边：右旋
+ RR：导致不平衡的结点在右结点的右结点后边：左旋
+ LR：导致不平衡的结点在左结点的右结点后边：先对左节点左旋变成LL
+ RL：导致不平衡的结点在右结点的左结点后边：先对右节点右旋变成RR



> 红黑树的原理

红黑树也是平衡树，但是它的平衡条件没有那么苛刻，不会频繁的触发树结构的调整，降低了旋转的开销。

红黑树是基于2-3树的原理，使用二叉树加上结点颜色实现的。

因为**红节点的出现**是为了模拟2-3树中的3节点，3结点不会增加2-3树的高度，所以红黑树的**高度近似取决于黑节点**。

红黑树每一条**路径的黑色结点数量**都相等。



红黑树结点的颜色有几个特点，第一个就是根节点和叶子节点都是黑色的，第二个就是红色结点不会连续出现。红黑色的自平衡操作是通过变色和旋转来实现的，在插入和删除结点的时候如果破坏了红黑树的性质，就会根据树的结构进行复杂的上升还有下沉操作。具体是哪些情况应该做什么调整，我不太清楚。





### 2、