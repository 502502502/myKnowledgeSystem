# 														社区管理系统



### 一、需求分析

**系统目标**

+ 实现一个线上的社区，方便用户进行交流



**需求分析**

+ 实现注册，登录和退出登录
+ 实现全站对帖子浏览，搜索功能，对搜索结果进行按字段排序
+ 对未登录的用户，用户，管理员进行操作上的权限管理

+ 用户和管理员可以发布帖子，向其他用户发送私信，对帖子点赞，对其他用户进行关注

+ 管理员可以删除，置顶，加精帖子，按照发布日期查看帖子，按照日期统计访问

+ 系统可以发送通知，告知关注，点赞，评论，删除消息

  

**详细用例**

参与者：未登录用户、用户、管理员、系统、数据库

+ 登录用户
  + 输入用户名，密码，验证码，点击登录，检查验证码，查找数据库，检查用户名和密码
  + 成功登录后显示首页
+ 注册用户
  + 输入用户基本信息，提交注册，检查是否已经注册，将信息写入数据库
  + 注册成功自动登录，显示首页
+ 退出登录
  + 点击退出，清除登录信息，显示未登录状态的首页
+ 浏览帖子
  + 分页查看帖子，可以点击帖子标题进入详细页面
+ 发布帖子
  + 点击发布，填写帖子，发布，将帖子写入数据库
+ 搜索帖子
  + 输入搜索内容，对内容进行分词，在数据库进行全文搜索，返回结果集
+ 评论帖子
  + 在帖子详情页面点击评论，输入评论，提交，将评论写入数据库，显示在页面
+ 点赞帖子
  + 在帖子详情页面点击点赞，将点赞信息写入数据库，每个用户只能点击一次，再次点击取消点赞
+ 关注用户
  + 在用户的个人主页可以点击关注，将关注信息写入数据库，再次点击取消关注
+ 置顶帖子
  + 管理员在帖子详情页面将帖子置顶，置顶后首页有限显示置顶帖子
+ 加精帖子
  + 同置顶
+ 删除帖子
  + 管理员在详情页面点击删除，在数据库删除帖子。
+ 统计帖子
  + 管理员选择时间，点击统计，从数据库查找指定时间的帖子，进行数量统计
+ 统计访问
  + 管理员选择时间，点击统计，统计指定时间内访问系统的用户，以及IP
+ 发送私信
  + 用户在其他用户的主页点击发送私信，将私信写入数据库，其他用户可以在未读消息处查看私信
+ 发送通知
  + 当发生点赞，评论，关注，删除时间时，由系统向关联用户发送通知。





### 二、功能模块

+ 注册登录模块
  + 实现登录和注册的功能
+ 浏览模块
  + 实现首页帖子的浏览，用户主页浏览
+ 工具模块
  + 提供一些辅助的开发工具
+ 关注，点赞，评论模块
  + 实现关注，点赞，评论功能
+ 搜索模块
  + 实现全站搜索功能，实现对搜索结果进行指定字段排序功能
+ 管理模块
  + 实现对帖子进行置顶，加精，删除功能
+ 私信模块
  + 实现发送私信，以及系统发送通知



### 三、ER图





### 四、数据表

**user**

+ id
+ name
+ password
+ privilege：身份
+ head：头像



**post**

+ id
+ user_id：帖子的发布者
+ title：帖子标题
+ content：帖子内容
+ time：发布时间
+ comment_count：评论的数量
+ top：是否置顶
+ status：是否加精，或者删除



**comment**

+ id
+ user_id：评论者
+ entity_id：被评论的实体id
+ entity_type：被评论的实体类型



**message**

+ id
+ sessionI_id：(会话标识)
+ from_id
+ to_id
+ content：内容
+ status：是否已读
+ time：发送时间



### 五、详细设计说明



**技术栈**

使用springboot搭建后端服务，采用类mvc架构模式进行开发，使用oracle存储数据，使用redis存储交互信息，使用security管理权限，使用kafka作为消息队列，使用elasticsearch实现全站搜索，使用mybatics-plus开发数据持久层，使用thyleay模板引擎渲染前端页面，使用html+css+js开发前端网页



**整体实现思路**

在数据库创建三种用户，分别代表未登录用户，用户，管理员，配置多个数据源，访问时根据身份切换数据源；

在实体层entity编写数据库实体表映射的实体对象；

在持久层dao编写对数据库的操作实现；

在业务层service完成某个业务的实现逻辑；

在控制层controller完成请求的处理，响应和跳转；

在util模块编写系统的辅助工具；

在interceptor模块编写统一处理的拦截器；



**业务模块实现思路**

+ 注册登录模块

  

+ 浏览模块

  

+ 工具模块

  

+ 关注，点赞，评论模块

  

+ 搜索模块

  

+ 管理模块

  

+ 私信模块



**其它工作**

1、找图像(**完成**)

> 系统需要五十个默认头像供选择；
>
> 一个系统专属头像；
>
> 一张错误页面的错误提示图片；
>
> 一张权限不足的错误提示图片;
>
> 一张404未找到的错误提示图片；

2、画图

> 画出用例图和ER图

3、造数据

> 系统开发结束后，需要手动注册五十个用户，每个用户发表两篇帖子，每个用户评论五篇帖子，点赞五篇帖子，关注五个用户，给root用户发送三条私信；
>
> 需要跟我的电脑处于同一网段

4、写文档

> 包括但不局限于系统使用说明书等所需要上交的报告
>
> 需要对开发的系统以及使用有所了解

5、录视频

> 录制系统使用的演示视频

6、敏感词过滤(选做)

> 可以设计一个类，对字符串进行敏感词检测和过滤；
>
> 在一个txt文件保存一些常见的敏感词；
>
> 接收形参为字符串，对其进行过滤，当字符串出现txt中存在的敏感词时，使用***等特殊字符进行替换
>
> 返回过滤后的字符串

8、加密模块(选做)

> 编写一个类，接受一个字符串作为形参，对它进行加密，返回加密后的结果；接受一个字符串形参，将其解密，返回解密后原来的字符串。

9、高亮显示(选做)

> 对字符串中的关键词进行高亮显示。
>
> 编写一个类，接受一个字符串作为形参，还有一个字符串集合作为形参，字符串集合中保存一些关键字，将字符串中关键字的位置加入一些html代码，使其在html解析时，关键字能够显示高亮。



### 六、系统操作演示视频



### 七、程序代码包