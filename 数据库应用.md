#### 1、数据库连接

```java
static{
     try{
        class.forName("COM.ibm.db2.jdbc.app.DB2Driver");
        }catch(Exception e){
            System.println(e);
            System.exit(1);
          }
}
String url = "jdbc:db2:sample";
Connection con = DriverManager.getConnection(url,userid,passwd);
```



#### 2、SQL执行对象

```java
//不拼接sql
Statement st = con.creatStatement();

//拼接sql
String sql = "SELECT name FROM Temp WHERE id=？" ;
Prestatement pstmt = conn.prepareStatement(sql);
pstmt.setString(1,id);

```



#### 3、结果集对象

```java
String SQL="SELECT NAME,JOB,SALARY FROM STAFF WHERE ID = 10";
Resultset rs = st.executeQuery(SQL);
```



#### 4、结果集中下一行

```java
boolean more = rs.next();
while(more){
     name = rs.getString(1);
     job = rs.getString(2);
     salary = rs.getString(3);
     more=rs.next();
     }
```



#### 5、更新操作

```java
String sqlstmt = "UPDATE TEMP SET SALARY = SALARY * 5 WHERE DEPT = ?";
PreparedStatement pstmt = con.prepareStatement( sqlstmt );
pstmt.setInt(1, mydeptno);//给sql中第一个？处赋值
updateCount += pstmt.executeUpdate();//每次更新都要计数
```



#### 6、设置自动提交

```java
con.setAutoCommit(TRUE)
```



#### 7、关闭对象

```java
rs.close()
stmt.close()
con.close()
```



#### 9、读取图片

```java
Statement st=conn.createStatement();
ResultSet rs=st.executeQuery("select image from employee");
while(rs.next()){
    //读取Blob对象
    Blob blob= (Blob) rs.getBlob(1);
    
    //Blob对象转化为InputStream流
    InputStream inputStream =blob.getBinaryStream();
    
    //要写入的文件
    File fileOutput = new File("c:/backa.jpg");
    
    //文件的写入流的定义
    FileOutputStream fo = new FileOutputStream(fileOutput);
    int c;
    //读取流并写入到文件中
    while ((c = inputStream.read()) != -1)
        fo.write(c);
        //流的关闭:
        fo.close();
}

```



#### 8、插入图片

```java
//将图片插入到BLOB类型的字段中

//建立一个表：
create table a(blob a);
//建立一个目录：
create directory tmp as 'e:\';
//建立一个PL/SQL块：
declare
     bfile b_file;
     blob b_lob;
begin
     //为了使PL/SQL编译成功，必须先为该列插入一个empty_blob() 值
     insert into a(a) values(empty_blob()) 
     //将该列与一个blog类型的变量绑定在一起，以后只要为b_lob赋值，即等于将该值插入了表中。
     return a into b_lob;
     //tmp是建立的文件所在的目录，filename.jpg是文件名;将文件转换为bfile类型
     b_file:=bfilename('tmp','filename.jpg');
     //将b_file 以只读的方式打开
     dbms_lob.open(b_file,dbms_lob.file_readonly);
     //将b_file中的内容转换到b_lob中
     dbms_lob.loadfromfile(b_lob,b_file,dbms_lob.getlength(b_file));
	 //关闭文件
     dbms_lob.close(b_file);
	 //提交
     commit;
end;


//jdbc
PreparedStatement preparedStatement = conn.prepareStatement("insert into emp_photo values('000130','jpeg',?)");
//创建文件对象:
File file=new File("e:/123.jpg");//参数是本地图片的路径名
// 创建流对象: 
BufferedInputStream imageInput = new BufferedInputStream(new  FileInputStream(file));
//参数赋值:
preparedStatement.setBinaryStream(1, imageInput,(int)file.length());
//第二个参数InputStream 对象，第三个参数字节数int
//执行语句
preparedStatement.executeUpdate();
```



#### 9、读取插入文档

```java
//定义clob类型
Clob resumelob = null;
//将结果集中第三个位置的clob取出
resumelob = rs3.getClob(3);
//将clob类型转化为字符串类型，参数固定，基本上就这么写
String detailinfo = resumelob.getSubString((long)1,(int)resumelob.length());
```



#### 10、结果集滚动

```java
rs.absolute()//绝对位置，负数表示从后面数
rs.first()第一条
rs.last()最后一条
rs.previoust()前一条
rs.next()后一条
```



#### 11、插入方式

```java
//单行插入 
String single_insert="insert into templ(empno,firstnme,lastname,edlevel)values (?,?,?,?)";

//多行插入 
int count =4；//用户想插入四行
String sql="insert into templ(empno,firstnme,lastname,edlevel) values (?,?,?,?)";
for(int i=0;i<3;i++){
    sql=sql+",(?,?,?,?)";
}

//通过子查询插入 
String find_insert="insert into templ(empno,firstnme,lastname,edlevel)"+
                    "select empno,firstnme,lastname,edlevel from employee "+
                    "where empno=? "+
                    "and firstnme=? "+
                    "and lastname=? "+
                    "and edlevel=?";
```

